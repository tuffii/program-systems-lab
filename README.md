# Системы программирования
# (PL/1 → ASM → Object → Loader)

Комплект включает три элемента:

- komppl.c — компилятор PL/1 → Ассемблер
- kompassr.c — компилятор Ассемблер → объектный образ
- absloadm.c — абсолютный загрузчик, эмулятор и отладчик
- тестовые файлы: examppl.pli, spis.mod

Проект собирается в 32-битном режиме (i386) внутри Docker-контейнера на базе Ubuntu 22.04.

---

# Структура репозитория
```
.
├── Dockerfile
└── src
    ├── absloadm.c
    ├── kompassr.c
    ├── komppl.c
    ├── Makefile
    ├── StartTestTask
    ├── GenSysProg
    ├── examppl.pli
    ├── spis.mod
    └── build/
```
Собранные бинарники помещаются в:
```
src/build/
```
---

# Требования

- Docker
- Linux (проверено на Ubuntu 22.04)

---

# Сборка проекта

## 1. Сборка Docker-образа

Из корня репозитория:
```bash
docker build -t lab32 .
```
---

## 2. Запуск контейнера
```bash
docker run -it --rm \
  -v "$PWD"/src:/lab \
  -w /lab \
  lab32
```
---

## 3. Сборка внутри контейнера
```
make
```
Проверка архитектуры:
```
file build/absloadm.exe
```
Ожидаемый результат:
```
ELF 32-bit LSB executable, Intel 80386
```
---

# Тестирование системы

## Быстрая проверка компилятора PL/1
```
./build/komppl.exe examppl.pli

Ожидаемый вывод:

трансляция завершена успешно
```
---

## Полный цикл через тестовый сценарий

Сделать скрипты исполняемыми:
```bash
chmod +x StartTestTask
chmod +x GenSysProg
```
Запустить:
```bash
./StartTestTask
```
Далее отвечать `Y` на все запросы.

Этапы:

1. PL/1 → Ассемблер
2. Ассемблер → Object image
3. Загрузка и выполнение объектного образа

При успешном завершении появится:
```
______________F I N I S H     J O B__________________
```
---

# Важно

- Проект собирается в режиме i386 (32-bit).
- Используется gcc -m32.
- В Docker-образе установлены 32-битные версии libc и ncurses.
- Бинарники являются ELF-файлами Linux (расширение .exe историческое и не означает Windows-программу).

---
